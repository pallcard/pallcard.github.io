<!DOCTYPE html>
<html lang="zh-CN">
  <head>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noodp"/>
  <meta name="author" content="刘科">
  <meta name="description" content="hust研一">
  <meta name="keywords" content="Java,博客">
  
  <link rel="prev" href="https://pallcard.github.io/2019/nginx%E9%97%AE%E9%A2%98/" />
  
  <link rel="canonical" href="https://pallcard.github.io/2019/mybaits/" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  <title>
       
       
           Mybaits | 刘科个人博客
       
  </title>
  <meta name="title" content="Mybaits | 刘科个人博客">
    
  
  <link rel="stylesheet" href="/font/iconfont.css">
  <link rel="stylesheet" href="/css/main.min.css">


  
  
 

<script type="application/ld+json">
 "@context" : "http://schema.org",
    "@type" : "BlogPosting",
    "mainEntityOfPage": {
         "@type": "WebPage",
         "@id": "https:\/\/pallcard.github.io\/"
    },
    "articleSection" : "posts",
    "name" : "Mybaits",
    "headline" : "Mybaits",
    "description" : "前言 整个实验使用Maven 来管理项目，编译器IDEA，github仓库 https:\/\/github.com\/pallcard\/mybatis\nJDBC连接数据库 1.引入依赖（pom.xml）\n\x26lt;dependencies\x26gt; \x26lt;dependency\x26gt; \x26lt;groupId\x26gt;mysql\x26lt;\/groupId\x26gt; \x26lt;artifactId\x26gt;mysql-connector-java\x26lt;\/artifactId\x26gt; \x26lt;version\x26gt;5.1.32\x26lt;\/version\x26gt; \x26lt;\/dependency\x26gt; \x26lt;\/dependencies\x26gt;\t 说明：（pom.xml） Maven 项目默认编译项目为JDK 1.5，通过引入以下依赖来指定Maven 编译版本\n\x26lt;build\x26gt; \x26lt;plugins\x26gt; \x26lt;plugin\x26gt; \x26lt;groupId\x26gt;org.apache.maven.plugins\x26lt;\/groupId\x26gt; \x26lt;artifactId\x26gt;maven-compiler-plugin\x26lt;\/artifactId\x26gt; \x26lt;version\x26gt;3.1\x26lt;\/version\x26gt; \x26lt;configuration\x26gt; \x26lt;source\x26gt;1.8\x26lt;\/source\x26gt; \x26lt;target\x26gt;1.8\x26lt;\/target\x26gt; \x26lt;\/configuration\x26gt; \x26lt;\/plugin\x26gt; \x26lt;\/plugins\x26gt; \x26lt;\/build\x26gt;  2.JDBC测试类JDBCTest.java\npublic class JDBCTest { public static void main(String[] args) throws Exception { Connection connection = null; PreparedStatement prepareStatement = null; ResultSet rs = null; try { \/\/ 加载驱动(每次加载驱动，驱动名硬编码) Class.forName(\x26quot;com.mysql.jdbc.Driver\x26quot;); \/\/ 获取连接(每次获取连接，连接信息硬编码) String url = \x26quot;jdbc:mysql:\/\/127.0.0.1:3306\/mybatis_demo\x26quot;; String user = \x26quot;root\x26quot;; String password = \x26quot;\x26quot;; connection = DriverManager.",
    "inLanguage" : "zh-CN",
    "author" : "刘科",
    "creator" : "刘科",
    "publisher": "刘科",
    "accountablePerson" : "刘科",
    "copyrightHolder" : "刘科",
    "copyrightYear" : "2019",
    "datePublished": "2019-06-20 19:00:36 \x2b0800 CST",
    "dateModified" : "2019-06-20 19:00:36 \x2b0800 CST",
    "url" : "https:\/\/pallcard.github.io\/2019\/mybaits\/",
    "wordCount" : "1767",
    "keywords" : [ "Mybaits","Java","development","总数", "刘科个人博客"]
}
</script>

</head>

  


  <body class="">
    <div class="wrapper">
        <nav class="navbar">
    <div class="container">
        <div class="navbar-header header-logo">
        	<a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://pallcard.github.io/">刘科个人博客</a>
        </div>
        <div class="menu navbar-right">
                
                
                <a class="menu-item" href="/posts/" title="">博客</a>
                
                <a class="menu-item" href="/categories/" title="">分类</a>
                
                <a class="menu-item" href="/tags/" title="">标签</a>
                
                <a class="menu-item" href="/about/" title="">关于</a>
                
        </div>
    </div>
</nav>
<nav class="navbar-mobile" id="nav-mobile" style="display: none">
     <div class="container">
        <div class="navbar-header">
            <div>  <a href="javascript:void(0);" class="theme-switch"><i class="iconfont icon-xihuan"></i></a>&nbsp;<a href="https://pallcard.github.io/">刘科个人博客</a></div>
            <div class="menu-toggle">
                <span></span><span></span><span></span>
            </div>
        </div>
     
          <div class="menu" id="mobile-menu">
                
                
                <a class="menu-item" href="/posts/" title="">博客</a>
                
                <a class="menu-item" href="/categories/" title="">分类</a>
                
                <a class="menu-item" href="/tags/" title="">标签</a>
                
                <a class="menu-item" href="/about/" title="">关于</a>
                
        </div>
    </div>
</nav>
    	 <main class="main">
          <div class="container">
      		
<article class="post-warp" itemscope itemtype="http://schema.org/Article">
    <header class="post-header">
        <h1 class="post-title" itemprop="name headline">Mybaits</h1>
        <div class="post-meta">
                Written by <a itemprop="name" href="https://pallcard.github.io/" rel="author">刘科</a> with ♥ 
                <span class="post-time">
                on <time datetime=2019-06-20 itemprop="datePublished">June 20, 2019</time>
                </span>
                in
                <i class="iconfont icon-folder"></i>
                <span class="post-category">
                        <a href="https://pallcard.github.io/categories/mybaits/"> Mybaits </a>
                        
                </span>
        </div>
    </header>
    <div class="post-content">
        

        
            
        

        
        
     
          
          
          

          
          
          

          

<h4 id="前言">前言</h4>

<p>整个实验使用Maven 来管理项目，编译器IDEA，github仓库 <a href="https://github.com/pallcard/mybatis" rel="nofollow noreferrer" target="_blank">https://github.com/pallcard/mybatis</a></p>

<h6 id="jdbc连接数据库">JDBC连接数据库</h6>

<p><strong>1.引入依赖（pom.xml）</strong></p>

<pre><code class="language-java">&lt;dependencies&gt;
	&lt;dependency&gt;
	    &lt;groupId&gt;mysql&lt;/groupId&gt;
	    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
	    &lt;version&gt;5.1.32&lt;/version&gt;
	&lt;/dependency&gt;
&lt;/dependencies&gt;	
</code></pre>

<p><strong>说明：（pom.xml）</strong>
Maven 项目默认编译项目为JDK 1.5，通过引入以下依赖来指定Maven 编译版本</p>

<pre><code class="language-java">&lt;build&gt;
	  &lt;plugins&gt;
	        &lt;plugin&gt;
	            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
	            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
	            &lt;version&gt;3.1&lt;/version&gt;
	            &lt;configuration&gt;
	                &lt;source&gt;1.8&lt;/source&gt;
	                &lt;target&gt;1.8&lt;/target&gt;
	            &lt;/configuration&gt;
	        &lt;/plugin&gt;
	  &lt;/plugins&gt;
&lt;/build&gt;
</code></pre>

<p><strong>2.JDBC测试类JDBCTest.java</strong></p>

<pre><code class="language-java">public class JDBCTest {
    public static void main(String[] args) throws Exception {
        Connection connection = null;
        PreparedStatement prepareStatement = null;
        ResultSet rs = null;

        try {
            // 加载驱动(每次加载驱动，驱动名硬编码)
            Class.forName(&quot;com.mysql.jdbc.Driver&quot;);
            // 获取连接(每次获取连接，连接信息硬编码)
            String url = &quot;jdbc:mysql://127.0.0.1:3306/mybatis_demo&quot;;
            String user = &quot;root&quot;;
            String password = &quot;&quot;;
            connection = DriverManager.getConnection(url, user, password);
            // 获取statement，preparedStatement （sql和java代码耦合）
            String sql = &quot;select * from tb_user where id=?&quot;;
            prepareStatement = connection.prepareStatement(sql);
            // 设置参数（参数类型手动判断、设置）
            prepareStatement.setLong(1, 1l);
            // 执行查询
            rs = prepareStatement.executeQuery();
            // 处理结果集（结果集中数据类型、下标、列名要手动判断）
            while (rs.next()) {
                System.out.println(rs.getString(&quot;user_name&quot;));
                System.out.println(rs.getString(&quot;name&quot;));
                System.out.println(rs.getInt(&quot;age&quot;));
                System.out.println(rs.getDate(&quot;birthday&quot;));
            }
        } finally {
            //（每次都要打开或关闭连接，浪费资源）
            // 关闭连接，释放资源
            if (rs != null) {
                rs.close();
            }
            if (prepareStatement != null) {
                prepareStatement.close();
            }
            if (connection != null) {
                connection.close();
            }
        }
    }
}
</code></pre>

<h4 id="mybaits整体架构">Mybaits整体架构</h4>

<p><figure><img src="/images/ring.svg" data-sizes="auto" data-src="https://img-blog.csdnimg.cn/20190620231844983.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3N1cGVyZmljaWFsS25vd2xlZGdl,size_16,color_FFFFFF,t_70" alt="Mybaits整体架构" class="lazyload"><figcaption class="image-caption">Mybaits整体架构</figcaption></figure></p>

<h4 id="mybaits快速入门">Mybaits快速入门</h4>

<p><strong>1.引入依赖（pom.xml）</strong></p>

<pre><code class="language-java">&lt;!--mybatis--&gt;
&lt;dependency&gt;
     &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
     &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
     &lt;version&gt;3.2.8&lt;/version&gt;
 &lt;/dependency&gt;
&lt;!--引入日志依赖包--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
    &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;
    &lt;version&gt;1.7.5&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<p><strong>2.User.java</strong></p>

<pre><code class="language-java">public class User {
    private int id;
    private String userName;
    private String password;
    private String name;
    private Integer age;
    private Integer sex;
    private Date birthday;
    private String created;
    private String updated;
	// get、set、toString省
}
</code></pre>

<p><strong>添加log4j.properties</strong></p>

<pre><code class="language-java">log4j.rootLogger=DEBUG,A1
log4j.logger.org.apache=DEBUG
log4j.appender.A1=org.apache.log4j.ConsoleAppender
log4j.appender.A1.layout=org.apache.log4j.PatternLayout
log4j.appender.A1.layout.ConversionPattern=%-d{yyyy-MM-dd HH:mm:ss,SSS} [%t] [%c]-[%p] %m%n
</code></pre>

<p><strong>3.全局配置文件（mybatis-config.xml）</strong></p>

<pre><code class="language-java">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE configuration
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;
&lt;!-- 根标签 --&gt;
&lt;configuration&gt;
    &lt;properties&gt;
        &lt;property name=&quot;driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;
        &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://127.0.0.1:3306/mybatis_demo?useUnicode=true&amp;amp;characterEncoding=utf-8&amp;amp;allowMultiQueries=true&quot;/&gt;
        &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;
        &lt;property name=&quot;password&quot; value=&quot;&quot;/&gt;
    &lt;/properties&gt;

    &lt;!-- 环境，可以配置多个，default：指定采用哪个环境 --&gt;
    &lt;environments default=&quot;test&quot;&gt;
        &lt;!-- id：唯一标识 --&gt;
        &lt;environment id=&quot;test&quot;&gt;
            &lt;!-- 事务管理器，JDBC类型的事务管理器 --&gt;
            &lt;transactionManager type=&quot;JDBC&quot; /&gt;
            &lt;!-- 数据源，池类型的数据源 --&gt;
            &lt;dataSource type=&quot;POOLED&quot;&gt;
                &lt;property name=&quot;driver&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt;
                &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://127.0.0.1:3306/mybatis_demo?useUnicode=true&amp;amp;characterEncoding=utf-8&amp;amp;allowMultiQueries=true&quot; /&gt;
                &lt;property name=&quot;username&quot; value=&quot;root&quot; /&gt;
                &lt;property name=&quot;password&quot; value=&quot;&quot; /&gt;
            &lt;/dataSource&gt;
        &lt;/environment&gt;
        &lt;environment id=&quot;development&quot;&gt;
            &lt;!-- 事务管理器，JDBC类型的事务管理器 --&gt;
            &lt;transactionManager type=&quot;JDBC&quot; /&gt;
            &lt;!-- 数据源，池类型的数据源 --&gt;
            &lt;dataSource type=&quot;POOLED&quot;&gt;
                &lt;property name=&quot;driver&quot; value=&quot;${driver}&quot; /&gt; &lt;!-- 配置了properties，所以可以直接引用 --&gt;
                &lt;property name=&quot;url&quot; value=&quot;${url}&quot; /&gt;
                &lt;property name=&quot;username&quot; value=&quot;${username}&quot; /&gt;
                &lt;property name=&quot;password&quot; value=&quot;${password}&quot; /&gt;
            &lt;/dataSource&gt;
        &lt;/environment&gt;
    &lt;/environments&gt;
    &lt;mappers&gt;
        &lt;mapper resource=&quot;mappers/UserMapper.xml&quot; /&gt;
    &lt;/mappers&gt;
&lt;/configuration&gt;
</code></pre>

<p><strong>4.配置Map.xml（UserMapper.xml）</strong></p>

<pre><code class="language-java">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;!-- mappers:根标签，namespace：命名空间，随便写，一般保证命名空间唯一 --&gt;
&lt;mapper namespace=&quot;UserMapper&quot;&gt;
    &lt;!-- statement，内容：sql语句。id：唯一标识，随便写，在同一个命名空间下保持唯一
       resultType：sql语句查询结果集的封装类型,tb_user即为数据库中的表
     --&gt;
    &lt;select id=&quot;selectUser&quot; resultType=&quot;cn.wishhust.mybatis.first.User&quot;&gt;
      select * from tb_user where id = #{id};
   &lt;/select&gt;
&lt;/mapper&gt;
</code></pre>

<p><strong>5.MybatisTest.java</strong></p>

<pre><code class="language-java">public class MybatisTest {
    public static void main(String[] args) throws Exception {
        // 指定全局配置文件
        String resource = &quot;mybatis-config.xml&quot;;
        // 读取配置文件
        InputStream inputStream = Resources.getResourceAsStream(resource);
        // 构建sqlSessionFactory
        SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);
        // 获取sqlSession
        SqlSession sqlSession = sqlSessionFactory.openSession();
        try {
            // 操作CRUD，第一个参数：指定statement，规则：命名空间+“.”+statementId
            // 第二个参数：指定传入sql的参数：这里是用户id
            User user = sqlSession.selectOne(&quot;UserMapper.selectUser&quot;, 1);
            System.out.println(user);
        } finally {
            sqlSession.close();
        }
    }
}
</code></pre>

<p><strong>6.Mybatis步骤</strong></p>

<p>1)配置mybatis-config.xml 全局的配置文件 (1、数据源，2、外部的mapper)</p>

<p>2)创建SqlSessionFactory</p>

<p>3)通过SqlSessionFactory创建SqlSession对象</p>

<p>4)通过SqlSession操作数据库 CRUD</p>

<p>5)调用session.commit()提交事务</p>

<p>6)调用session.close()关闭会话</p>

<h4 id="mybatis实现crud">Mybatis实现CRUD</h4>

<p><strong>1.UserDao接口</strong></p>

<pre><code class="language-java">public interface UserDao {
    /**
     * 根据id查询用户信息
     *
     * @param id
     * @return
     */
    public User queryUserById(int id);

    /**
     * 查询所有用户信息
     *
     * @return
     */
    public List&lt;User&gt; queryUserAll();

    /**
     * 新增用户
     *
     * @param user
     */
    public void insertUser(User user);

    /**
     * 更新用户信息
     *
     * @param user
     */
    public void updateUser(User user);

    /**
     * 根据id删除用户信息
     *
     * @param id
     */
    public void deleteUser(int id);
}
</code></pre>

<p><strong>2.UserDaoImpl</strong></p>

<pre><code class="language-java">public class UserDaoImpl implements UserDao {
    public SqlSession sqlSession;

    public UserDaoImpl(SqlSession sqlSession) {
        this.sqlSession = sqlSession;
    }

    @Override
    public User queryUserById(int id) {
        return this.sqlSession.selectOne(&quot;UserDao.queryUserById&quot;, id);
    }

    @Override
    public List&lt;User&gt; queryUserAll() {
        return this.sqlSession.selectList(&quot;UserDao.queryUserAll&quot;);
    }

    @Override
    public void insertUser(User user) {
        this.sqlSession.insert(&quot;UserDao.insertUser&quot;, user);
    }

    @Override
    public void updateUser(User user) {
        this.sqlSession.update(&quot;UserDao.updateUser&quot;, user);
    }

    @Override
    public void deleteUser(int id) {
        this.sqlSession.delete(&quot;UserDao.deleteUser&quot;, id);
    }
}
</code></pre>

<p><strong>3.UserDaoMapper.xml</strong></p>

<pre><code class="language-java">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;!-- mapper:根标签，namespace：命名空间，随便写，一般保证命名空间唯一 --&gt;
&lt;mapper namespace=&quot;UserDao&quot;&gt;
    &lt;!-- statement，内容：sql语句。id：唯一标识，随便写，在同一个命名空间下保持唯一
       resultType：sql语句查询结果集的封装类型,tb_user即为数据库中的表
     --&gt;
    &lt;!--&lt;select id=&quot;queryUserById&quot; resultType=&quot;com.zpc.mybatis.pojo.User&quot;&gt;--&gt;
    &lt;!--select * from tb_user where id = #{id}--&gt;
    &lt;!--&lt;/select&gt;--&gt;

    &lt;!--使用别名--&gt;
    &lt;select id=&quot;queryUserById&quot; resultType=&quot;cn.wishhust.mybatis.pojo.User&quot;&gt;
      select
       tuser.id as id,
       tuser.user_name as userName,
       tuser.password as password,
       tuser.name as name,
       tuser.age as age,
       tuser.birthday as birthday,
       tuser.sex as sex,
       tuser.created as created,
       tuser.updated as updated
       from
       tb_user tuser
       where tuser.id = #{id};
   &lt;/select&gt;

    &lt;select id=&quot;queryUserAll&quot; resultType=&quot;cn.wishhust.mybatis.pojo.User&quot;&gt;
        select * from tb_user;
    &lt;/select&gt;

    &lt;!--插入数据--&gt;
    &lt;insert id=&quot;insertUser&quot; parameterType=&quot;cn.wishhust.mybatis.pojo.User&quot;&gt;
        INSERT INTO tb_user (
        user_name,
        password,
        name,
        age,
        sex,
        birthday,
        created,
        updated
        )
        VALUES
        (
        #{userName},
        #{password},
        #{name},
        #{age},
        #{sex},
        #{birthday},
        now(),
        now()
        );
    &lt;/insert&gt;

    &lt;update id=&quot;updateUser&quot; parameterType=&quot;cn.wishhust.mybatis.pojo.User&quot;&gt;
        UPDATE tb_user
        &lt;trim prefix=&quot;set&quot; suffixOverrides=&quot;,&quot;&gt;
            &lt;if test=&quot;userName!=null&quot;&gt;user_name = #{userName},&lt;/if&gt;
            &lt;if test=&quot;password!=null&quot;&gt;password = #{password},&lt;/if&gt;
            &lt;if test=&quot;name!=null&quot;&gt;name = #{name},&lt;/if&gt;
            &lt;if test=&quot;age!=null&quot;&gt;age = #{age},&lt;/if&gt;
            &lt;if test=&quot;sex!=null&quot;&gt;sex = #{sex},&lt;/if&gt;
            &lt;if test=&quot;birthday!=null&quot;&gt;birthday = #{birthday},&lt;/if&gt;
            updated = now(),
        &lt;/trim&gt;
        WHERE
        (id = #{id});
    &lt;/update&gt;

    &lt;delete id=&quot;deleteUser&quot;&gt;
        delete from tb_user where id=#{id}
    &lt;/delete&gt;
&lt;/mapper&gt;
</code></pre>

<p><strong>4.mybatis-config.xml</strong></p>

<pre><code class="language-java">&lt;mappers&gt;
    &lt;mapper resource=&quot;mappers/UserMapper.xml&quot; /&gt;
    &lt;mapper resource=&quot;mappers/UserDaoMapper.xml&quot; /&gt;
&lt;/mappers&gt;
</code></pre>

<p><strong>5.测试</strong>
引入依赖</p>

<pre><code class="language-java">&lt;!--junit--&gt;
&lt;dependency&gt;
  &lt;groupId&gt;junit&lt;/groupId&gt;
  &lt;artifactId&gt;junit&lt;/artifactId&gt;
  &lt;version&gt;4.12&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<p>UserDaoTest .java(<strong>测试类的生成可以在UserDao上Alt+enter，选择创建测试类</strong>)</p>

<pre><code class="language-java">public class UserDaoTest {

    public UserDao userDao;
    public SqlSession sqlSession;

    @Before
    public void setUp() throws Exception {
        // mybatis-config.xml
        String resource = &quot;mybatis-config.xml&quot;;
        // 读取配置文件
        InputStream is = Resources.getResourceAsStream(resource);
        // 构建SqlSessionFactory
        SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(is);
        // 获取sqlSession
        sqlSession = sqlSessionFactory.openSession();
        this.userDao = new UserDaoImpl(sqlSession);
    }

    @Test
    public void queryUserById() {
        System.out.println(this.userDao.queryUserById(1));
    }

    @Test
    public void queryUserAll() {
        List&lt;User&gt; userList = this.userDao.queryUserAll();
        for (User user : userList) {
            System.out.println(user);
        }
    }

    @Test
    public void insertUser() {
        User user = new User();
        user.setAge(16);
        user.setBirthday(new Date(&quot;1990/09/02&quot;));
        user.setName(&quot;大鹏&quot;);
        user.setPassword(&quot;123456&quot;);
        user.setSex(1);
        user.setUserName(&quot;evan&quot;);
        this.userDao.insertUser(user);
        this.sqlSession.commit();

    }

    @Test
    public void updateUser() {
        User user = new User();
        user.setBirthday(new Date());
        user.setName(&quot;www&quot;);
        user.setPassword(&quot;654321&quot;);
        user.setSex(1);
        user.setUserName(&quot;www&quot;);
        user.setId(1);
        this.userDao.updateUser(user);
        this.sqlSession.commit();

    }

    @Test
    public void deleteUser() {
        this.userDao.deleteUser(4);
        this.sqlSession.commit();
    }
}
</code></pre>

<h4 id="动态代理mapper实现类">动态代理Mapper实现类</h4>

<p><strong>1.UserMapper</strong>（对应原UserDao）</p>

<pre><code class="language-java">public interface UserMapper {
    /**
     * 登录（直接使用注解指定传入参数名称）
     * @param userName
     * @param password
     * @return
     */
    public User login(@Param(&quot;userName&quot;) String userName, @Param(&quot;password&quot;) String password);

    /**
     * 根据表名查询用户信息（直接使用注解指定传入参数名称）
     * @param tableName
     * @return
     */
    public List&lt;User&gt; queryUserByTableName(@Param(&quot;tableName&quot;) String tableName);

    /**
     * 根据Id查询用户信息
     * @param id
     * @return
     */
    public User queryUserById(int id);

    /**
     * 查询所有用户信息
     * @return
     */
    public List&lt;User&gt; queryUserAll();

    /**
     * 新增用户信息
     * @param user
     */
    public void insertUser(User user);

    /**
     * 根据id更新用户信息
     * @param user
     */
    public void updateUser(User user);

    /**
     * 根据id删除用户信息
     * @param id
     */
    public void deleteUserById(int id);
}
</code></pre>

<p><strong>2.UserMapper.xml</strong>
<strong><em>mapper:根标签，namespace：命名空间，为了使用接口动态代理，这里必须是接口的全路径名</em></strong></p>

<pre><code class="language-java">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;
&lt;!-- mapper:根标签，namespace：命名空间，随便写，一般保证命名空间唯一 ，为了使用接口动态代理，这里必须是接口的全路径名--&gt;
&lt;mapper namespace=&quot;cn.wishhust.mybatis.mappers.UserMapper&quot;&gt;
    &lt;!--
       1.#{},预编译的方式preparedstatement，使用占位符替换，防止sql注入，一个参数的时候，任意参数名可以接收
       2.${},普通的Statement，字符串直接拼接，不可以防止sql注入，一个参数的时候，必须使用${value}接收参数
     --&gt;
    &lt;select id=&quot;queryUserByTableName&quot; resultType=&quot;cn.wishhust.mybatis.pojo.User&quot;&gt;
        select * from ${tableName}
    &lt;/select&gt;

    &lt;select id=&quot;login&quot; resultType=&quot;cn.wishhust.mybatis.pojo.User&quot;&gt;
        select * from tb_user where user_name = #{userName} and password = #{password}
    &lt;/select&gt;

    &lt;!-- statement，内容：sql语句。
       id：唯一标识，随便写，在同一个命名空间下保持唯一，使用动态代理之后要求和方法名保持一致
       resultType：sql语句查询结果集的封装类型，使用动态代理之后和方法的返回类型一致；resultMap：二选一
       parameterType：参数的类型，使用动态代理之后和方法的参数类型一致
     --&gt;
    &lt;select id=&quot;queryUserById&quot; resultType=&quot;cn.wishhust.mybatis.pojo.User&quot;&gt;
        select * from tb_user where id = #{id}
    &lt;/select&gt;
    &lt;select id=&quot;queryUserAll&quot; resultType=&quot;cn.wishhust.mybatis.pojo.User&quot;&gt;
        select * from tb_user
    &lt;/select&gt;
    &lt;!-- 新增的Statement
       id：唯一标识，随便写，在同一个命名空间下保持唯一，使用动态代理之后要求和方法名保持一致
       parameterType：参数的类型，使用动态代理之后和方法的参数类型一致
       useGeneratedKeys:开启主键回写
       keyColumn：指定数据库的主键
       keyProperty：主键对应的pojo属性名
     --&gt;
    &lt;insert id=&quot;insertUser&quot; useGeneratedKeys=&quot;true&quot; keyColumn=&quot;id&quot; keyProperty=&quot;id&quot;
            parameterType=&quot;cn.wishhust.mybatis.pojo.User&quot;&gt;
        INSERT INTO tb_user (
            id,
            user_name,
            password,
            name,
            age,
            sex,
            birthday,
            created,
            updated
        )
        VALUES
        (
            null,
            #{userName},
            #{password},
            #{name},
            #{age},
            #{sex},
            #{birthday},
            NOW(),
            NOW()
        );
    &lt;/insert&gt;
    &lt;!--
       更新的statement
       id：唯一标识，随便写，在同一个命名空间下保持唯一，使用动态代理之后要求和方法名保持一致
       parameterType：参数的类型，使用动态代理之后和方法的参数类型一致
     --&gt;
    &lt;update id=&quot;updateUser&quot; parameterType=&quot;cn.wishhust.mybatis.pojo.User&quot;&gt;
        UPDATE tb_user
        &lt;trim prefix=&quot;set&quot; suffixOverrides=&quot;,&quot;&gt;
            &lt;if test=&quot;userName!=null&quot;&gt;user_name = #{userName},&lt;/if&gt;
            &lt;if test=&quot;password!=null&quot;&gt;password = #{password},&lt;/if&gt;
            &lt;if test=&quot;name!=null&quot;&gt;name = #{name},&lt;/if&gt;
            &lt;if test=&quot;age!=null&quot;&gt;age = #{age},&lt;/if&gt;
            &lt;if test=&quot;sex!=null&quot;&gt;sex = #{sex},&lt;/if&gt;
            &lt;if test=&quot;birthday!=null&quot;&gt;birthday = #{birthday},&lt;/if&gt;
            updated = now(),
        &lt;/trim&gt;
        WHERE
        (id = #{id});
    &lt;/update&gt;
    &lt;!--
       删除的statement
       id：唯一标识，随便写，在同一个命名空间下保持唯一，使用动态代理之后要求和方法名保持一致
       parameterType：参数的类型，使用动态代理之后和方法的参数类型一致
     --&gt;
    &lt;delete id=&quot;deleteUserById&quot; parameterType=&quot;java.lang.Integer&quot;&gt;
        delete from tb_user where id=#{id}
    &lt;/delete&gt;
&lt;/mapper&gt;
</code></pre>

<p><strong>3.mybatis-config.xml</strong></p>

<pre><code class="language-java">&lt;mappers&gt;
    &lt;mapper resource=&quot;mappers/UserMapper.xml&quot; /&gt;
    &lt;mapper resource=&quot;mappers/UserDaoMapper.xml&quot; /&gt;
    &lt;mapper resource=&quot;mappers/UserMapper2.xml&quot; /&gt;
&lt;/mappers&gt;
</code></pre>

<p><strong>4.测试</strong>
a.映射文件的命名空间（namespace）必须是mapper接口的全路径
b.映射文件的statement的id必须和mapper接口的方法名保持一致
c.Statement的resultType必须和mapper接口方法的返回类型一致
d.statement的parameterType必须和mapper接口方法的参数类型一致（不一定）</p>

<pre><code class="language-java">public class UserMapperTest {

    public UserMapper userMapper;

    @Before
    public void setUp() throws Exception {
        // 指定配置文件
        String resource = &quot;mybatis-config.xml&quot;;
        // 读取配置文件
        InputStream inputStream = Resources.getResourceAsStream(resource);
        // 构建sqlSessionFactory
        SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);
        // 获取sqlSession
        SqlSession sqlSession = sqlSessionFactory.openSession(true);

        // 1. 映射文件的命名空间（namespace）必须是mapper接口的全路径
        // 2. 映射文件的statement的id必须和mapper接口的方法名保持一致
        // 3. Statement的resultType必须和mapper接口方法的返回类型一致
        // 4. statement的parameterType必须和mapper接口方法的参数类型一致（不一定）
        this.userMapper = sqlSession.getMapper(UserMapper.class);

    }

    @Test
    public void login() {
        System.out.println(this.userMapper.login(&quot;lk&quot;, &quot;123456&quot;));
    }

    @Test
    public void queryUserByTableName() {
        List&lt;User&gt; userList = this.userMapper.queryUserByTableName(&quot;tb_user&quot;);
        for (User user : userList) {
            System.out.println(user);
        }
    }

    @Test
    public void queryUserById() {
        System.out.println(this.userMapper.queryUserById(1));
    }

    @Test
    public void queryUserAll() {
        List&lt;User&gt; userList = this.userMapper.queryUserAll();
        for (User user : userList) {
            System.out.println(user);
        }
    }
    @Test
    public void insertUser() {
        User user = new User();
        user.setAge(20);
        user.setBirthday(new Date());
        user.setName(&quot;大神&quot;);
        user.setPassword(&quot;123456&quot;);
        user.setSex(2);
        user.setUserName(&quot;bigGod222&quot;);
        this.userMapper.insertUser(user);
        System.out.println(user.getId());
    }

    @Test
    public void updateUser() {
        User user = new User();
        user.setBirthday(new Date());
        user.setName(&quot;静静&quot;);
        user.setPassword(&quot;123456&quot;);
        user.setSex(0);
        user.setUserName(&quot;Jinjin&quot;);
        user.setId(1);
        this.userMapper.updateUser(user);
    }

    @Test
    public void deleteUserById() {
        this.userMapper.deleteUserById(1);
    }
}
</code></pre>

<h4 id="mapper-xml文件详解">Mapper XML文件详解</h4>

<p><strong>1.CRUD标签</strong>
* select</p>

<p>id属性：当前名称空间下的statement的唯一标识。必须。要求id和mapper接口中的方法的名字一致。
resultType：将结果集映射为java的对象类型。必须（和 resultMap 二选一）
parameterType：传入参数类型。可以省略</p>

<ul>
<li>insert</li>
</ul>

<p>id：唯一标识，随便写，在同一个命名空间下保持唯一，使用动态代理之后要求和方法名保持一致
parameterType：参数的类型，使用动态代理之后和方法的参数类型一致
useGeneratedKeys:开启主键回写
keyColumn：指定数据库的主键
keyProperty：主键对应的pojo属性名
标签内部：具体的sql语句。</p>

<ul>
<li>update</li>
</ul>

<p>id属性：当前名称空间下的statement的唯一标识(必须属性)；
parameterType：传入的参数类型，可以省略。
标签内部：具体的sql语句。</p>

<ul>
<li>delete</li>
</ul>

<p>id属性：当前名称空间下的statement的唯一标识(必须属性)；
parameterType：传入的参数类型，可以省略。
标签内部：具体的sql语句。</p>

<p><strong>2.#{}和${}</strong>
#{} 和 ${} 在预编译中的处理是不一样的。#{} 在预处理时，会把参数部分用一个占位符 ? 代替;而 ${} 则只是简单的字符串替换.<strong>优先使用 #{}, ${} 会导致 sql 注入的问题。</strong></p>

<p>场景1：数据库有两个一模一样的表。历史表，当前表
查询表中的信息，有时候从历史表中去查询数据，有时候需要去新的表去查询数据。
希望使用1个方法来完成操作。</p>

<pre><code class="language-java">&lt;select id=&quot;queryUserByTableName&quot; resultType=&quot;com.zpc.mybatis.pojo.User&quot;&gt;
    select * from #{tableName}
&lt;/select&gt;
&lt;-- 相当于select * from “tb_user”;  会报错 --&gt;

&lt;-- 正确做法 --&gt;
&lt;select id=&quot;queryUserByTableName&quot; resultType=&quot;com.zpc.mybatis.pojo.User&quot;&gt;
    select * from ${tableName}
&lt;/select&gt;
</code></pre>

<p>注意：
使用${} 去取出参数值信息，需要使用${value}
#{} 只是表示占位，与参数的名字无关，如果只有一个参数，会自动对应。多参数时，通常在方法的参数列表上加上一个注释@Param(“xxxx”) 显式指定参数的名字</p>

<p><strong>3.sql片段</strong></p>

<pre><code class="language-java">&lt;--定义--&gt;
&lt;sql id=””&gt;&lt;/sql&gt;
&lt;--使用--&gt;
&lt;include refId=”” /&gt;
</code></pre>

<h4 id="动态sql">动态sql</h4>

<p>动态sql有
1. if
2. choose，when，otherwise
3. where，set
4. foreach</p>

<p><strong>1.if</strong>
场景：查询用户，如果输入了姓名，则按姓名查询</p>

<pre><code class="language-java">// 接口
List&lt;User&gt; queryUserListByName(@Param(&quot;userName&quot;) String userName);

&lt;--mapper--&gt;
&lt;mapper namespace=&quot;cn.wishhust.mybatis.dao.mappers.DynamicSqlMapper&quot;&gt;
    &lt;!--if的简单使用--&gt;
    &lt;select id=&quot;queryUserListByName&quot;
            resultType=&quot;cn.wishhust.mybatis.pojo.User&quot;&gt;
      select * from tb_user
      &lt;if test=&quot;userName != null and userName.trim() != ''&quot;&gt;
          where user_name like '%${userName}%'
      &lt;/if&gt;
    &lt;/select&gt;
&lt;/mapper&gt;
</code></pre>

<p><strong>2.choose，when，otherwise</strong>
场景：查询用户，如果输入了姓名则按照姓名模糊查找，否则如果输入了年龄则按照年龄查找，否则查找姓名为“ls”的用户。</p>

<pre><code class="language-java">// 接口
List&lt;User&gt; queryUserListByNameOrAge(@Param(&quot;userName&quot;) String userName,
                                    @Param(&quot;age&quot;) Integer age);
                                        
&lt;--mapper--&gt;
&lt;mapper namespace=&quot;cn.wishhust.mybatis.dao.mappers.DynamicSqlMapper&quot;&gt;
	&lt;!--choose when otherwise的简单使用--&gt;
    &lt;select id=&quot;queryUserListByNameOrAge&quot;
            resultType=&quot;cn.wishhust.mybatis.pojo.User&quot;&gt;
        select * from tb_user WHERE
        &lt;!--
        1.一旦有条件成立的when，后续的when则不会执行
        2.当所有的when都不执行时,才会执行otherwise
        --&gt;
        &lt;choose&gt;
            &lt;when test=&quot;userName!=null and userName.trim()!=''&quot;&gt;
                user_name like '%${userName}%'
            &lt;/when&gt;
            &lt;when test=&quot;age!=null&quot;&gt;
                age = #{age}
            &lt;/when&gt;
            &lt;otherwise&gt;
                user_name = 'ls'
            &lt;/otherwise&gt;
        &lt;/choose&gt;
    &lt;/select&gt;
&lt;/mapper&gt;
</code></pre>

<p><strong>3.where 和set</strong>
场景一：查询所有用户，如果输入了姓名按照姓名进行模糊查询，如果输入年龄，按照年龄进行查询，如果两者都输入，两个条件都要成立。</p>

<pre><code class="language-java">// 接口
List&lt;User&gt; queryUserListByNameAndAge(@Param(&quot;userName&quot;) String userName,
                                     @Param(&quot;age&quot;) Integer age);

&lt;--mapper--&gt;
&lt;mapper namespace=&quot;cn.wishhust.mybatis.dao.mappers.DynamicSqlMapper&quot;&gt;
	&lt;!--where 和set的简单使用--&gt;
    &lt;select id=&quot;queryUserListByNameAndAge&quot; resultType=&quot;cn.wishhust.mybatis.pojo.User&quot;&gt;
        select * from tb_user
        &lt;!--如果多出一个and，会自动去除，如果缺少and或者多出多个and则会报错--&gt;
        &lt;where&gt;
            &lt;if test=&quot;userName!=null and userName.trim()!=''&quot;&gt;
                and name like '%${userName}%'
            &lt;/if&gt;
            &lt;if test=&quot;age!=null&quot;&gt;
                and age = #{age}
            &lt;/if&gt;
        &lt;/where&gt;
    &lt;/select&gt;
&lt;/mapper&gt;
</code></pre>

<p>场景二：修改用户信息，如果参数user中的某个属性为null，则不修改。</p>

<pre><code class="language-java">// 接口
void updateUser(User user);

&lt;--mapper--&gt;
&lt;mapper namespace=&quot;cn.wishhust.mybatis.dao.mappers.DynamicSqlMapper&quot;&gt;
	&lt;update id=&quot;updateUser&quot; parameterType=&quot;cn.wishhust.mybatis.pojo.User&quot;&gt;
        UPDATE tb_user
        &lt;trim prefix=&quot;set&quot; suffixOverrides=&quot;,&quot;&gt;
            &lt;if test=&quot;userName!=null&quot;&gt;user_name = #{userName},&lt;/if&gt;
            &lt;if test=&quot;password!=null&quot;&gt;password = #{password},&lt;/if&gt;
            &lt;if test=&quot;name!=null&quot;&gt;name = #{name},&lt;/if&gt;
            &lt;if test=&quot;age!=null&quot;&gt;age = #{age},&lt;/if&gt;
            &lt;if test=&quot;sex!=null&quot;&gt;sex = #{sex},&lt;/if&gt;
            &lt;if test=&quot;birthday!=null&quot;&gt;birthday = #{birthday},&lt;/if&gt;
            updated = now(),
        &lt;/trim&gt;
        WHERE
        (id = #{id});
    &lt;/update&gt;
&lt;/mapper&gt;
</code></pre>

<p><strong>4.foreach</strong>
场景：按照多个id查询用户信息。</p>

<pre><code class="language-java">// 接口
List&lt;User&gt; queryUserListByIds(@Param(&quot;ids&quot;) int[] ids);

&lt;--mapper--&gt;
&lt;mapper namespace=&quot;cn.wishhust.mybatis.dao.mappers.DynamicSqlMapper&quot;&gt;
	&lt;!--foreach的简单使用--&gt;
    &lt;select id=&quot;queryUserListByIds&quot; resultType=&quot;cn.wishhust.mybatis.pojo.User&quot;&gt;
        select * from tb_user where id in
        &lt;foreach collection=&quot;ids&quot; item=&quot;id&quot; open=&quot;(&quot; close=&quot;)&quot; separator=&quot;,&quot;&gt;
            #{id}
        &lt;/foreach&gt;
    &lt;/select&gt;
&lt;/mapper&gt;
</code></pre>

<h4 id="高级查询">高级查询</h4>

<p><strong>一对一查询</strong>
需求：查询订单，并查询出下单人的信息。
<strong>Order.java</strong></p>

<pre><code class="language-java">public class Order {
    private Integer id;
    private Long userId;
    private String orderNumber;
    private Date createdTime;
    private Date updatedTime;
    private User user;
    // get,set,toString
}
</code></pre>

<p><strong>OrderMapper.java</strong></p>

<pre><code class="language-java">public interface OrderMapper {
	Order queryOrderWithUserByOrderNumber(@Param(&quot;number&quot;) String number);

}
</code></pre>

<p><strong>OrderMapper.xml</strong></p>

<pre><code class="language-java">&lt;!-- mappers:根标签，namespace：命名空间，随便写，一般保证命名空间唯一 --&gt;
&lt;mapper namespace=&quot;cn.wishhust.mybatis.dao.mappers.OrderMapper&quot;&gt;
    &lt;resultMap id=&quot;OrderUserResultMap&quot;
               type=&quot;cn.wishhust.mybatis.pojo.Order&quot;
               autoMapping=&quot;true&quot;&gt;
        &lt;!--
            指定主键
            column：数据库的列名
            property：java实体类中的属性名
        --&gt;
        &lt;id column=&quot;id&quot; property=&quot;id&quot;/&gt;
        &lt;!--association:完成子对象的映射--&gt;
        &lt;!--property:子对象在父对象中的属性名--&gt;
        &lt;!--javaType:子对象的java类型--&gt;
        &lt;!--autoMapping:完成子对象的自动映射，若开启驼峰，则按驼峰匹配--&gt;
        &lt;association property=&quot;user&quot;
                     javaType=&quot;cn.wishhust.mybatis.pojo.User&quot;
                     autoMapping=&quot;true&quot;&gt;
            &lt;id column=&quot;user_id&quot; property=&quot;id&quot;/&gt;
        &lt;/association&gt;
    &lt;/resultMap&gt;

    &lt;select id=&quot;queryOrderWithUserByOrderNumber&quot;
            resultMap=&quot;OrderUserResultMap&quot;&gt;
      select * from tb_order o left join tb_user u
        on o.user_id=u.id
        where o.order_number = #{number}
    &lt;/select&gt;
&lt;/mapper&gt;
</code></pre>

<h4 id="缓存">缓存</h4>

<p><strong>一级缓存</strong>
Mybatis的一级缓存的<strong>作用域是session</strong>，当openSession()后，如果执行相同的SQL（相同语句和参数），Mybatis不进行执行SQL，而是从缓存中命中返回。原理：
Mybatis执行查询时首先去缓存区命中，如果命中直接返回，没有命中则执行SQL，从数据库中查询。</p>

<p>在mybatis中，一级缓存默认是开启的，并且一直无法关闭</p>

<p>一级缓存满足条件：
1、同一个session中
2、相同的SQL和参数</p>

<p><strong>二级缓存</strong>
mybatis 的二级缓存的<strong>作用域是一个mapper的namespace</strong> ，同一个namespace中查询sql可以从缓存中命中。</p>

<pre><code class="language-java">&lt;mapper namespace=&quot;cn.wishhust.mybatis.dao.mappers.UserMapper&quot;&gt;
    &lt;cache/&gt;
    ...
&lt;/mapper&gt;

&lt;settings&gt;
    &lt;!--开启驼峰匹配--&gt;
    &lt;setting name=&quot;mapUnderscoreToCamelCase&quot; value=&quot;true&quot;/&gt;
    &lt;!--开启二级缓存,全局总开关，这里关闭，mapper中开启了也没用--&gt;
    &lt;setting name=&quot;cacheEnabled&quot; value=&quot;false&quot;/&gt;
&lt;/settings&gt;
</code></pre>

<h4 id="sql语句中出现-的解决方案">sql语句中出现’&lt;’的解决方案</h4>

<p><strong>方法一：</strong>
|转义字符| 字符 |说明|
|&ndash;|&ndash;|&ndash;|
| &amp;lt； | &lt; | 小于 |
| &amp;gt； | &gt; | 小于 |
| &amp;amp； | &amp; | 和 |
| &amp;apos； | &lsquo; | 省略号 |
| &amp;quot； | &ldquo; | 引号 |</p>

<p><strong>方法二：</strong></p>

<![CDATA[ 符号 ]]>

<p>注：使用&lt;![CDATA[ ]]&gt;标记的sql语句中的<where> <if>等标签不会被解析。</p>

<p>报错1：</p>

<p>org.apache.ibatis.binding.BindingException: Type interface cn.wishhust.mybatis.mappers.OrderMapper is not known to the MapperRegistry.</p>

<p>原因：
xml文件的namespace的值对应的mapper接口写错了。没使用全名</p>

    </div>

    <div class="post-copyright">
             
            <p class="copyright-item">
                <span>Author:</span>
                <span>刘科 </span>
                </p>
            
           
             
            <p class="copyright-item">
                    <span>Link:</span>
                    <a href=https://pallcard.github.io/2019/mybaits/>https://pallcard.github.io/2019/mybaits/</span>
            </p>
            
            
    </div>

  
    <div class="post-tags">
        
            <section>
            <i class="iconfont icon-tag"></i>Tag(s): 
            
            <span class="tag"><a href="https://pallcard.github.io/tags/mybaits/">
                    #Mybaits</a></span>
            
            <span class="tag"><a href="https://pallcard.github.io/tags/java/">
                    #Java</a></span>
            
            <span class="tag"><a href="https://pallcard.github.io/tags/development/">
                    #development</a></span>
            
            <span class="tag"><a href="https://pallcard.github.io/tags/%E6%80%BB%E6%95%B0/">
                    #总数</a></span>
            
            </section>
        
        <section>
                <a href="javascript:window.history.back();">back</a></span> · 
                <span><a href="https://pallcard.github.io/">home</a></span>
        </section>
    </div>

    <div class="post-nav">
        
        <a href="https://pallcard.github.io/2019/nginx%E9%97%AE%E9%A2%98/" class="prev" rel="prev" title="Nginx问题"><i class="iconfont icon-left"></i>&nbsp;Nginx问题</a>
         
        
    </div>

    <div class="post-comment">
          
                 
          
    </div>
</article>
          </div>
		   </main>
      <footer class="footer">
    <div class="copyright">
        &copy;
        
        <span class="with-love">
    	 <i class="iconfont icon-love"></i> 
         </span>
         
            <span class="author" itemprop="copyrightHolder"><a href="https://pallcard.github.io/">刘科</a> | </span> 
         

         
            <a href="http://www.miibeian.gov.cn/" target="_blank" rel="external nofollow">鄂ICP备19006996号-1 </a> |
         
		  <span>Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow">Hugo</a> & <a href="https://github.com/liuzc/leaveit" target="_blank" rel="external nofollow">LeaveIt</a></span> 
    </div>
</footer>












    
     <link href="//lib.baomitu.com/lightgallery/1.6.11/css/lightgallery.min.css" rel="stylesheet">  
      
     <script src="/js/vendor_gallery.min.js" async="" ></script>
    
  



     </div>
  </body>
</html>
